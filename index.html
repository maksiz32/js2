<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/main.css">
        <title>eShop</title>
    </head>
    <body>
        <div id="app">
            <div class="modal-window" v-show="isVisibleCart">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="40" viewBox="0 0 511.76 511.76" class="modal-close" @click="isVisibleCart = !isVisibleCart">
                    <path d="M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z" data-original="#000000"></path>
                </svg>
                <div class="basket">
                    <div v-if="basketItems.length < 1" class="basket-item">
                        Корзина пуста
                    </div>
                    <div v-else>
                        <div class="basket-item" v-for="item of basketItems" :key="item.id_product">
                            <span>{{ item.product_name }}</span>
                            <span>{{ item.quantity }}</span>
                            <span>{{ item.price }} руб</span>
                            <span>
                                <strong>Итого: {{ item.price * item.quantity }}</strong>
                            </span>
                            <button class="basket-item-btn plus" @click="addProduct(item)"> + </button>
                            <button class="basket-item-btn minus" @click="delProduct(item)"> - </button>
                        </div>
                        <div class="basket-item">Итого: {{ totalBasketAmount() }} руб</div>
                    </div>
                </div>
            </div>

            <header class="cart-menu">
                    <input @input="FilterGoods()" type="text" class="goods-search" placeholder="Введите строку поиска" v-model="searchLine">
                    <!-- <button class="search-button" type="button">Искать</button> -->
                    <button class="cart-menu-button" type="button" @click="isVisibleCart = !isVisibleCart">Корзина</button>
            </header>
            <main>
                <section class="goods-list">
                    <div class="goods-item" v-for="good in filteredGoods" :key="good.id_product">
                        <img class="goods-item-pic" v-if="good.img" :src="img/good.img" alt="good.img" width="120" height="100">
                        <img v-else class="goods-item-pic" src="img/nophoto.png" alt="nophoto.png" width="120" height="100">
                        <h3>{{good.product_name}}</h3>
                        <p>{{good.price}}</p>
                        <button type="button" class="goods-item-btn" @click="addProduct(good)">
                            Купить
                        </button>
                    </div>
                </section>
            </main>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="js/script.js"></script>
    </body>
</html>
